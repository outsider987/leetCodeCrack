{"version":3,"file":"7f50e331270718e8e8b2.js","mappings":";;;;;;;;;;;;;;;AAAkD;AACT;AACzC;AACA;AACA;AACA,oBAAoB,iDAAG;AACvB,2BAA2B,iDAAU;AACrC;AACA;AACA;AACA,SAAS;AACT;AACA,YAAY,+DAAe;AAC3B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,YAAY,+DAAe;AAC3B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,iEAAe,UAAU,EAAC;;;;;;;;;;;;;;;;;;;;;ACnCA;AACyC;AACnC;AACgB;AAChD,iEAAe;AACf,gBAAgB,mDAAY;AAC5B,oBAAoB,6pMAAW,SAAS,EAAE,QAAQ;AAClD,mBAAmB,oCAAoC;AACvD,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,CAAC,EAAC;AACK;AACP,gBAAgB,mDAAY;AAC5B;AACA,oBAAoB,6pMAAW,SAAS,EAAE,QAAQ;AAClD,mBAAmB,oCAAoC;AACvD,KAAK;AACL;AACA,sBAAsB,+DAAe;AACrC;AACA,qDAAqD,kBAAkB;AACvE;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,oCAAoC,+DAAe;AACnD;AACA,qCAAqC,iDAAU,IAAI,6pMAAW,SAAS;AACvE;AACA,qBAAqB;AACrB;AACA,qDAAqD,yBAAyB;AAC9E,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA,oBAAoB,+DAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,YAAY,kDAAc,CAAC,6DAAc,GAAG,gDAAgD;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACjFqD;AAC9C;AACP,wBAAwB,6CAAM;AAC9B,gCAAgC,+CAAQ;AACxC;AACA,gCAAgC,+CAAQ;AACxC,sBAAsB,6CAAM;AAC5B,sBAAsB,6CAAM;AAC5B;AACA,gBAAgB,cAAc;AAC9B,oBAAoB,0BAA0B;AAC9C;AACA;AACA,gBAAgB,cAAc;AAC9B,oBAAoB,6CAA6C;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4CAA4C;AACrF,6BAA6B;AAC7B;AACA;AACA,yCAAyC,mDAAmD;AAC5F,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,gDAAS;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;;;;;;;;;;;;;;;;;;AC9DgC;AACQ;AACjC;AACP;AACA,IAAI,kDAAc,CAAC,qDAAQ;AAC3B;AACO;AACP;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACO;AACP;AACA,IAAI,kDAAc,CAAC,qDAAQ,GAAG,mCAAmC;AACjE;;;;;;;;;;;;;;;;ACjBO;AACP;AACA;AACA,2FAA2F,GAAG;AAC9F;AACO;AACP;AACA","sources":["webpack://leetcodecrack/./src/api/auth.ts","webpack://leetcodecrack/./src/api/base.ts","webpack://leetcodecrack/./src/hooks/useMyForm.tsx","webpack://leetcodecrack/./src/utils/storage.ts","webpack://leetcodecrack/./src/utils/validate.ts"],"sourcesContent":["import { setTokenStorage } from '~/utils/storage';\nimport api, { privateApi } from './base';\nconst subPath = 'auth';\n// AxiosResponse<APIResponse<any>, any>\nconst useAuthApi = () => {\n    const authApi = api(subPath);\n    const privateAuthApi = privateApi(subPath);\n    const POST_REGISTER = async (userDate) => {\n        const resp = await authApi.post('register', {\n            ...userDate,\n        });\n        if (resp.data.data)\n            setTokenStorage(resp.data.data);\n        return resp;\n    };\n    const POST_LOGIN = async (userDate) => {\n        const resp = await authApi.post('login', {\n            ...userDate,\n        });\n        if (resp.data.data)\n            setTokenStorage(resp.data.data);\n        return resp;\n    };\n    const GET_REFRESH = async () => {\n        const resp = await privateAuthApi.get('refresh', {\n            withCredentials: true,\n        });\n        return resp;\n    };\n    const GET_TokenTest = async () => {\n        const resp = await privateAuthApi.get('test');\n        return resp;\n    };\n    return { POST_REGISTER, GET_REFRESH, POST_LOGIN, GET_TokenTest };\n};\nexport default useAuthApi;\n","import axios from 'axios';\nimport { getTokenStorage, setTokenStorage } from '~/utils/storage';\nimport { store } from '~/store';\nimport { setAlertDialog } from '~/store/global';\nexport default (subPath = '') => {\n    const api = axios.create({\n        baseURL: `${process.env.API_URL}${subPath}`,\n        headers: { 'Content-Type': 'application/json' },\n    });\n    api.interceptors.request.use((config) => {\n        return config;\n    }, (error) => {\n        return Promise.reject(error);\n    });\n    api.interceptors.response.use((response) => {\n        checkErrorCdoe(response);\n        return response;\n    }, (error) => {\n        checkErrorCdoe(error.response);\n        return error.response;\n    });\n    return api;\n};\nexport const privateApi = (subPath = '') => {\n    const api = axios.create({\n        // withCredentials: true,\n        baseURL: `${process.env.API_URL}${subPath}`,\n        headers: { 'Content-Type': 'application/json' },\n    });\n    api.interceptors.request.use(async (config) => {\n        const token = getTokenStorage();\n        if (config.headers)\n            config.headers.authorization = `Bearer ${token.accessToken}`;\n        return config;\n    }, (error) => {\n        return Promise.reject(error);\n    });\n    api.interceptors.response.use(async (response) => {\n        checkErrorCdoe(response);\n        return response;\n    }, async (error) => {\n        if (error.response) {\n            // Access Token was expired\n            console.log(error);\n            if (error.response.status === 401) {\n                const storedToken = getTokenStorage();\n                try {\n                    const rs = await axios.post(`${process.env.API_URL}auth/refresh`, {\n                        refresh_token: storedToken.refresh_token,\n                    }, {\n                        headers: {\n                            authorization: `Bearer ${storedToken.refreshToken}`,\n                        },\n                    });\n                    if (rs.status === 401) {\n                        checkErrorCdoe(rs);\n                        return rs;\n                    }\n                    setTokenStorage(rs.data.data);\n                    return api(error.config);\n                }\n                catch (_error) {\n                    checkErrorCdoe(_error.response);\n                    return Promise.reject(_error);\n                }\n            }\n        }\n        return Promise.reject(error);\n    });\n    return api;\n};\nasync function checkErrorCdoe(response) {\n    switch (response.data.status) {\n        case false:\n            store.dispatch(setAlertDialog({ show: true, msg: JSON.stringify(response.data) }));\n            break;\n        case true:\n            break;\n        default:\n            break;\n    }\n}\n","import { useEffect, useState, useRef, } from 'react';\nexport const useForm = (initialStates, validateList, isStrean = true) => {\n    const isSubmitted = useRef(false);\n    const [values, setValues] = useState(initialStates);\n    const initializeErrors = initialStates;\n    const [errors, setErrors] = useState(initializeErrors);\n    const isPassRef = useRef(false);\n    const refErrors = useRef(errors);\n    const handleChange = (e) => {\n        const { value, name } = e.target;\n        setValues({ ...values, [name]: value });\n    };\n    function noWhiteSpaceChange(e) {\n        const { value, name } = e.target;\n        setValues({ ...values, [name]: value.replace(/\\s/g, '') });\n    }\n    const validating = () => {\n        if (isSubmitted.current) {\n            let isPassed = true;\n            if (validateList) {\n                for (const [key, vList] of Object.entries(validateList)) {\n                    for (const v of vList) {\n                        const validateIspass = v.validate(values[key]);\n                        if (isPassed)\n                            isPassed = isPassRef.current = validateIspass;\n                        validateIspass\n                            ? (refErrors.current = {\n                                ...refErrors.current,\n                                [key]: { pass: v.validate(values[key]), message: '' },\n                            })\n                            : (refErrors.current = {\n                                ...refErrors.current,\n                                [key]: { pass: v.validate(values[key]), message: v.message },\n                            });\n                        if (!validateIspass)\n                            break;\n                    }\n                }\n                setErrors(refErrors.current);\n                isStrean ? (isSubmitted.current = true) : (isSubmitted.current = false);\n            }\n        }\n    };\n    useEffect(() => {\n        validating();\n    }, [values]);\n    const handleSubmit = (data) => {\n        return (event) => {\n            event.preventDefault();\n            isSubmitted.current = true;\n            validating();\n            data(values, isPassRef.current);\n        };\n    };\n    const validator = {\n        values,\n        errors,\n        handleChange,\n        noWhiteSpaceChange,\n        isPass: isPassRef.current,\n    };\n    return { handleSubmit, validator };\n};\n","import { store } from '~/store';\nimport { setToken } from '~/store/auth';\nexport const setTokenStorage = (tokens) => {\n    localStorage.setItem('tokens', JSON.stringify(tokens));\n    store.dispatch(setToken(tokens));\n};\nexport const getTokenStorage = () => {\n    const tokens = localStorage.getItem('tokens');\n    if (tokens == undefined)\n        return { accessToken: '', refreshToken: '' };\n    if (tokens)\n        return JSON.parse(tokens);\n    return '';\n};\nexport const cleanTokenStorage = () => {\n    localStorage.removeItem('tokens');\n    store.dispatch(setToken({ accessToken: '', refreshToken: '' }));\n};\n","export const validateRegexp = {\n    email: RegexpBindFactory(/^\\w+((-\\w+)|(\\.\\w+))*\\@\\w+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z]+$/),\n    require: RegexpBindFactory(/\\w+/),\n    password: RegexpBindFactory(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/),\n};\nexport function RegexpBindFactory(regexp) {\n    return regexp.test.bind(regexp);\n}\n"],"names":[],"sourceRoot":""}